-- Скрипт добавления 19 новых статей в справочник
-- Выполнить на продакшн PostgreSQL: PGPASSWORD=SecureLex2024 psql -U securelex -h localhost -d securelex -f scripts/add-articles-production.sql

-- Topic 28: Cookies и ПД (5 статей)
INSERT INTO guide_articles (id, topic_id, slug, status, title, summary, body_base_md, created_at, updated_at, published_at) VALUES 
(11, 28, 'cookies-i-trebovaniya-fz152', 'published', 'Cookies и требования ФЗ-152', 'Когда cookies становятся персональными данными и требуют согласия по ФЗ-152', 
'# Cookies и требования ФЗ-152

## Когда cookies являются персональными данными

Согласно позиции Роскомнадзора, cookies становятся персональными данными в следующих случаях:

### 1. Идентифицирующие cookies

Cookies считаются ПД, если они позволяют идентифицировать конкретное лицо:
- Связаны с аккаунтом пользователя
- Содержат уникальный идентификатор, привязанный к профилю
- Используются для кросс-сайтового отслеживания

### 2. Аналитические cookies

Cookies аналитических систем (Яндекс.Метрика, Google Analytics) могут быть ПД, если:
- Собирают данные о поведении конкретного пользователя
- Создают профиль посетителя
- Хранят историю посещений

## Требования ФЗ-152 к cookies

Статья 9 ФЗ-152 требует получить согласие субъекта на обработку ПД:
- Согласие должно быть конкретным
- Согласие должно быть информированным
- Согласие должно быть сознательным

## Штрафы за нарушения

Отсутствие согласия на cookies = обработка ПД без согласия:
- ч. 1 ст. 13.11 КоАП РФ: штраф до 100 000 руб (повторно до 300 000 руб)', NOW(), NOW(), NOW())
ON CONFLICT (id) DO NOTHING;

INSERT INTO guide_articles (id, topic_id, slug, status, title, summary, body_base_md, created_at, updated_at, published_at) VALUES 
(12, 28, 'cookie-banner-trebovaniya', 'published', 'Требования к cookie-баннеру по ФЗ-152', 'Как правильно оформить баннер cookies для соответствия законодательству', 
'# Требования к cookie-баннеру по ФЗ-152

## Обязательные элементы баннера

### 1. Информирование

Баннер должен содержать:
- Уведомление об использовании cookies
- Цели использования cookies
- Ссылку на политику cookies или политику конфиденциальности

### 2. Получение согласия

Для cookies, являющихся ПД:
- Активное действие пользователя (кнопка "Принять")
- Возможность отказа
- Детальные настройки (рекомендуется)

### 3. Управление согласием

- Возможность изменить выбор в любой момент
- Инструкция по отзыву согласия
- Ссылка на настройки cookies

## Чего НЕ должно быть

❌ Cookie wall (блокировка сайта без согласия)
❌ Заранее отмеченные чекбоксы
❌ Скрытые настройки отказа
❌ Манипулятивный дизайн (тёмные паттерны)

## Рекомендуемая структура

1. Заголовок: "Мы используем cookies"
2. Краткое описание целей
3. Ссылка на полную политику
4. Кнопки: "Принять все", "Только необходимые", "Настроить"', NOW(), NOW(), NOW())
ON CONFLICT (id) DO NOTHING;

INSERT INTO guide_articles (id, topic_id, slug, status, title, summary, body_base_md, created_at, updated_at, published_at) VALUES 
(13, 28, 'cookie-kategorii-i-klassifikaciya', 'published', 'Категории cookies и их классификация', 'Типы cookies и какие из них требуют согласия пользователя', 
'# Категории cookies и их классификация

## Категории по назначению

### 1. Строго необходимые (Strictly Necessary)

Без них сайт не работает:
- Авторизация пользователя
- Корзина покупок
- Безопасность
- Балансировка нагрузки

**Согласие НЕ требуется** - это технически необходимые cookies

### 2. Функциональные (Functional)

Улучшают работу сайта:
- Запоминание языка
- Запоминание региона
- Персонализация интерфейса

**Рекомендуется согласие** если создают профиль пользователя

### 3. Аналитические (Analytics)

Сбор статистики:
- Яндекс.Метрика
- Google Analytics
- Счётчики посещений

**Требуется согласие** если позволяют идентифицировать пользователя

### 4. Рекламные/Маркетинговые (Advertising)

Таргетированная реклама:
- Ретаргетинг
- Поведенческая реклама
- Кросс-сайтовое отслеживание

**Обязательно согласие** - всегда являются ПД

## Рекомендации

1. Классифицируйте все cookies на сайте
2. Блокируйте аналитические и рекламные до получения согласия
3. Документируйте каждый cookie в политике', NOW(), NOW(), NOW())
ON CONFLICT (id) DO NOTHING;

INSERT INTO guide_articles (id, topic_id, slug, status, title, summary, body_base_md, created_at, updated_at, published_at) VALUES 
(14, 28, 'cookies-i-tretyie-storony', 'published', 'Cookies третьих сторон: требования и ответственность', 'Ответственность за cookies Яндекс.Метрики, Google Analytics и других сервисов', 
'# Cookies третьих сторон: требования и ответственность

## Кто отвечает за cookies третьих сторон?

### Владелец сайта несёт ответственность

Согласно ФЗ-152, владелец сайта является оператором ПД и отвечает за:
- Все cookies, устанавливаемые на его сайте
- Cookies подключенных сервисов
- Информирование пользователей
- Получение согласия

### Распространённые сервисы с cookies

1. **Аналитика**: Яндекс.Метрика, Google Analytics, Roistat
2. **Реклама**: Яндекс.Директ, Google Ads, ВКонтакте Pixel
3. **Чаты**: JivoSite, Carrot Quest, Intercom
4. **Видео**: YouTube, Vimeo (встроенные плееры)
5. **Карты**: Яндекс.Карты, Google Maps
6. **Соцсети**: кнопки "Поделиться"

## Как соответствовать закону

### 1. Аудит всех cookies

Используйте инструменты разработчика браузера для выявления всех cookies

### 2. Договоры с обработчиками

Согласно ч. 3 ст. 6 ФЗ-152, заключите договоры поручения с сервисами-обработчиками

### 3. Блокировка до согласия

Технически блокируйте загрузку скриптов третьих сторон до получения согласия

### 4. Документирование

В политике cookies перечислите все сторонние сервисы и их цели', NOW(), NOW(), NOW())
ON CONFLICT (id) DO NOTHING;

INSERT INTO guide_articles (id, topic_id, slug, status, title, summary, body_base_md, created_at, updated_at, published_at) VALUES 
(15, 28, 'otziv-soglasiya-cookies', 'published', 'Отзыв согласия на cookies', 'Как реализовать право пользователя на отзыв согласия на cookies', 
'# Отзыв согласия на cookies

## Право на отзыв согласия

Согласно ч. 2 ст. 9 ФЗ-152, субъект вправе отозвать согласие на обработку ПД в любой момент.

## Требования к механизму отзыва

### 1. Доступность

- Механизм отзыва должен быть легко доступен
- Не сложнее, чем дать согласие
- Работать без необходимости связываться с поддержкой

### 2. Способы реализации

**Панель управления cookies**:
- Иконка или ссылка в подвале сайта
- Открывает настройки категорий cookies
- Позволяет отключить ненужные категории

**Настройки браузера**:
- Инструкция по удалению cookies
- Ссылка на справку браузера

### 3. Последствия отзыва

После отзыва согласия оператор обязан:
- Прекратить обработку
- Удалить cookies с устройства (если технически возможно)
- Не устанавливать новые cookies до нового согласия

## Техническая реализация

1. Храните выбор пользователя в localStorage или необходимом cookie
2. При отзыве - удаляйте аналитические/рекламные cookies
3. Блокируйте загрузку соответствующих скриптов', NOW(), NOW(), NOW())
ON CONFLICT (id) DO NOTHING;

-- Topic 7: Согласие на обработку (3 статьи)
INSERT INTO guide_articles (id, topic_id, slug, status, title, summary, body_base_md, created_at, updated_at, published_at) VALUES 
(16, 7, 'formy-soglasiya-na-obrabotku-pd', 'published', 'Формы согласия на обработку персональных данных', 'Виды форм согласия и требования к их оформлению на сайте', 
'# Формы согласия на обработку персональных данных

## Виды согласия по ФЗ-152

### 1. Простое согласие

Для обычной обработки ПД достаточно:
- Чекбокс "Я согласен на обработку персональных данных"
- Ссылка на политику конфиденциальности
- Активное действие пользователя

### 2. Письменное согласие

Требуется в случаях ст. 10 и 11 ФЗ-152:
- Специальные категории ПД (здоровье, убеждения)
- Биометрические данные
- Трансграничная передача в страны без адекватной защиты

Должно содержать реквизиты ч. 4 ст. 9 ФЗ-152.

## Требования к форме согласия на сайте

### Обязательные элементы

1. **Чекбокс** - не отмечен заранее
2. **Текст согласия** - понятный и конкретный
3. **Ссылка на политику** - открывается в новом окне
4. **Цели обработки** - указаны явно

### Пример правильного текста

✅ "Нажимая кнопку «Отправить», я даю согласие на обработку моих персональных данных в соответствии с Политикой конфиденциальности для целей обработки заявки"

### Пример неправильного текста

❌ "Отправляя форму, вы автоматически соглашаетесь со всеми условиями"

## Раздельные согласия

Для разных целей - разные согласия:
- Согласие на обработку заявки
- Согласие на рассылку (отдельный чекбокс!)
- Согласие на передачу третьим лицам', NOW(), NOW(), NOW())
ON CONFLICT (id) DO NOTHING;

INSERT INTO guide_articles (id, topic_id, slug, status, title, summary, body_base_md, created_at, updated_at, published_at) VALUES 
(17, 7, 'soglasie-na-rassylku', 'published', 'Согласие на рассылку: требования ФЗ-152 и ФЗ о рекламе', 'Как правильно получить согласие на email и SMS рассылки', 
'# Согласие на рассылку: требования ФЗ-152 и ФЗ о рекламе

## Двойное регулирование

Рассылки регулируются двумя законами:
1. **ФЗ-152** - согласие на обработку email/телефона
2. **ФЗ о рекламе (ст. 18)** - согласие на получение рекламы

## Требования к согласию на рассылку

### 1. Отдельный чекбокс

❌ Нельзя: "Соглашаюсь на обработку ПД и рассылку"
✅ Правильно: Два отдельных чекбокса

### 2. Не отмечен заранее

Чекбокс подписки должен быть пустым по умолчанию

### 3. Конкретность

Укажите:
- Тип рассылки (email, SMS, мессенджеры)
- Тематика (новости, акции, персональные предложения)
- Периодичность (опционально)

### 4. Возможность отписки

- Ссылка отписки в каждом письме
- Работающий механизм отписки
- Отписка без входа в аккаунт

## Штрафы за нарушения

### По ФЗ о рекламе (ст. 14.3 КоАП):
- Для граждан: 2 000 - 2 500 руб
- Для должностных лиц: 4 000 - 20 000 руб
- Для юрлиц: 100 000 - 500 000 руб

### По ФЗ-152 (ст. 13.11 КоАП):
- За обработку без согласия: до 150 000 руб', NOW(), NOW(), NOW())
ON CONFLICT (id) DO NOTHING;

INSERT INTO guide_articles (id, topic_id, slug, status, title, summary, body_base_md, created_at, updated_at, published_at) VALUES 
(18, 7, 'otzyv-soglasiya-pd', 'published', 'Отзыв согласия на обработку персональных данных', 'Как реализовать право пользователя на отзыв согласия', 
'# Отзыв согласия на обработку персональных данных

## Право на отзыв

Согласно ч. 2 ст. 9 ФЗ-152, субъект персональных данных вправе отозвать согласие на обработку ПД.

## Требования к процедуре отзыва

### 1. Простота

Отозвать согласие должно быть не сложнее, чем его дать:
- Форма на сайте
- Письмо на email оператора
- Личный кабинет

### 2. Бесплатность

Оператор не вправе требовать плату за отзыв согласия

### 3. Сроки обработки

Оператор обязан:
- Прекратить обработку в течение 30 дней
- Уничтожить ПД (если нет других оснований для хранения)

## Когда отзыв не прекращает обработку

Оператор вправе продолжить обработку при наличии:
- Договора с субъектом (п. 5 ч. 1 ст. 6)
- Требования закона (п. 2 ч. 1 ст. 6)
- Судебного решения
- Защиты жизни и здоровья

## Реализация на сайте

### Форма отзыва согласия

Минимальные поля:
- Email (для идентификации)
- Какие данные удалить
- Подтверждение личности

### В личном кабинете

- Кнопка "Удалить мои данные"
- Выбор: удалить данные / удалить аккаунт
- Подтверждение действия', NOW(), NOW(), NOW())
ON CONFLICT (id) DO NOTHING;

-- Topic 10: Политика конфиденциальности (4 статьи)
INSERT INTO guide_articles (id, topic_id, slug, status, title, summary, body_base_md, created_at, updated_at, published_at) VALUES 
(19, 10, 'struktura-politiki-konfidencialnosti', 'published', 'Структура политики конфиденциальности', 'Обязательные разделы политики согласно ФЗ-152', 
'# Структура политики конфиденциальности

## Обязательные разделы по ФЗ-152

### 1. Общие положения

- Наименование оператора
- ИНН, ОГРН, адрес
- Контактные данные
- Ответственный за обработку ПД

### 2. Цели обработки

Конкретные цели для каждой категории данных:
- Обработка заказов
- Рассылка новостей
- Аналитика
- Улучшение сервиса

### 3. Правовые основания

Ссылки на статьи ФЗ-152:
- Согласие субъекта (ст. 9)
- Исполнение договора (п. 5 ч. 1 ст. 6)
- Требования закона (п. 2 ч. 1 ст. 6)

### 4. Категории данных

Перечень собираемых данных:
- Идентификационные (ФИО, email, телефон)
- Технические (IP, cookies, user-agent)
- Транзакционные (история покупок)

### 5. Сроки хранения

Для каждой категории данных указать:
- Срок хранения
- Основание для срока
- Действия по истечении

### 6. Права субъекта

Перечень прав по ст. 14 ФЗ-152:
- Доступ к данным
- Уточнение данных
- Блокирование
- Уничтожение
- Отзыв согласия

### 7. Меры защиты

Общее описание мер безопасности:
- Организационные меры
- Технические меры
- Ограничение доступа

### 8. Передача третьим лицам

Перечень категорий получателей:
- Платёжные системы
- Службы доставки
- Аналитические сервисы', NOW(), NOW(), NOW())
ON CONFLICT (id) DO NOTHING;

INSERT INTO guide_articles (id, topic_id, slug, status, title, summary, body_base_md, created_at, updated_at, published_at) VALUES 
(20, 10, 'razmeschenie-politiki-na-sayte', 'published', 'Размещение политики конфиденциальности на сайте', 'Где и как разместить политику для соответствия закону', 
'# Размещение политики конфиденциальности на сайте

## Требования ч. 2 ст. 18.1 ФЗ-152

Оператор обязан обеспечить **неограниченный доступ** к политике.

## Где разместить политику

### 1. Подвал сайта (footer)

**Обязательно**: ссылка в подвале каждой страницы
- Название: "Политика конфиденциальности" или "Политика обработки ПД"
- Видимость: хорошо читаемый текст

### 2. Формы сбора данных

Ссылка рядом с каждой формой:
- Регистрация
- Заказ
- Обратная связь
- Подписка

### 3. Личный кабинет

Раздел с правовыми документами в настройках аккаунта

## Технические требования

### Формат страницы

✅ Правильно:
- HTML-страница на сайте
- Читаемый текст
- Возможность поиска по тексту

❌ Неправильно:
- Только PDF без HTML-версии
- Изображение текста
- Скрытый или мелкий шрифт

### URL политики

Рекомендуемые адреса:
- /privacy-policy
- /politika-konfidencialnosti
- /privacy

### Мета-теги

- Запретить индексацию: нет необходимости
- Title: "Политика конфиденциальности — [Название компании]"', NOW(), NOW(), NOW())
ON CONFLICT (id) DO NOTHING;

INSERT INTO guide_articles (id, topic_id, slug, status, title, summary, body_base_md, created_at, updated_at, published_at) VALUES 
(21, 10, 'aktualizaciya-politiki', 'published', 'Актуализация политики конфиденциальности', 'Когда и как обновлять политику конфиденциальности', 
'# Актуализация политики конфиденциальности

## Когда обновлять политику

### Обязательное обновление

1. **Изменение законодательства**
   - Новые редакции ФЗ-152
   - Разъяснения Роскомнадзора

2. **Изменение практик обработки**
   - Новые цели обработки
   - Новые категории данных
   - Новые третьи лица

3. **Изменение данных оператора**
   - Смена названия
   - Смена адреса
   - Смена ответственного лица

### Рекомендуемое обновление

- Ежегодный аудит политики
- При запуске новых сервисов
- При интеграции новых инструментов

## Как уведомлять об изменениях

### 1. Дата обновления

Обязательно указать:
- "Дата последнего обновления: ДД.ММ.ГГГГ"
- "Версия: X.X"

### 2. Уведомление пользователей

При существенных изменениях:
- Email-уведомление зарегистрированным
- Баннер на сайте
- Запрос повторного согласия (если требуется)

### 3. Архив версий

Рекомендуется:
- Хранить предыдущие версии
- Делать их доступными по запросу

## Журнал изменений

Ведите лог изменений:
- Дата изменения
- Что изменилось
- Причина изменения', NOW(), NOW(), NOW())
ON CONFLICT (id) DO NOTHING;

INSERT INTO guide_articles (id, topic_id, slug, status, title, summary, body_base_md, created_at, updated_at, published_at) VALUES 
(22, 10, 'oshibki-v-politike-konfidencialnosti', 'published', 'Типичные ошибки в политике конфиденциальности', 'Распространённые нарушения и как их избежать', 
'# Типичные ошибки в политике конфиденциальности

## Критические ошибки

### 1. Отсутствие реквизитов оператора

❌ "Компания обрабатывает ваши данные..."
✅ "ООО «Название», ИНН 1234567890, адрес: ..."

**Нарушение**: ч. 2 ст. 18.1 ФЗ-152

### 2. Неопределённые цели

❌ "Для улучшения качества обслуживания"
✅ "Для обработки заказов и доставки товаров"

**Нарушение**: ст. 5 ФЗ-152 - принцип определённости целей

### 3. Безлимитные сроки хранения

❌ "Данные хранятся бессрочно"
✅ "Данные хранятся в течение 3 лет с момента последнего заказа"

**Нарушение**: ч. 7 ст. 5 ФЗ-152

## Распространённые недостатки

### 4. Копирование чужих политик

- Неактуальные данные оператора
- Неподходящие цели обработки
- Несуществующие сервисы

### 5. Отсутствие информации о cookies

Если сайт использует cookies - они должны быть описаны

### 6. Нет информации о третьих лицах

Перечислите категории получателей данных:
- Платёжные системы
- Службы доставки
- Аналитические сервисы

### 7. Устаревшая информация

- Ссылки на недействующие редакции законов
- Старые адреса и контакты
- Несуществующие сервисы

## Как проверить политику

1. Проверить все реквизиты
2. Сверить цели с реальными практиками
3. Проверить актуальность законов
4. Проверить список третьих лиц', NOW(), NOW(), NOW())
ON CONFLICT (id) DO NOTHING;

-- Topic 25: Чек-листы (3 статьи)
INSERT INTO guide_articles (id, topic_id, slug, status, title, summary, body_base_md, created_at, updated_at, published_at) VALUES 
(23, 25, 'chek-list-cookies-soglasie', 'published', 'Чек-лист: Cookies и согласие на сайте', 'Практический чек-лист для проверки соответствия cookies требованиям ФЗ-152', 
'# Чек-лист: Cookies и согласие на сайте

## Проверьте каждый пункт на вашем сайте

### Инвентаризация cookies

- [ ] Составлен полный список cookies на сайте
- [ ] Cookies классифицированы по категориям
- [ ] Определены cookies третьих сторон
- [ ] Документированы цели каждого cookie

### Cookie-баннер

- [ ] Баннер появляется при первом посещении
- [ ] Есть информация о целях использования cookies
- [ ] Есть ссылка на политику cookies
- [ ] Кнопка "Принять" работает
- [ ] Есть возможность отказаться
- [ ] Настройки по категориям (рекомендуется)

### Техническая реализация

- [ ] Аналитические cookies не устанавливаются до согласия
- [ ] Рекламные cookies блокированы до согласия
- [ ] Выбор пользователя сохраняется
- [ ] Скрипты третьих сторон загружаются после согласия

### Управление согласием

- [ ] Есть возможность изменить выбор
- [ ] Ссылка на настройки cookies в подвале
- [ ] Работает механизм отзыва согласия
- [ ] Cookies удаляются при отзыве

### Документация

- [ ] Политика cookies опубликована
- [ ] В политике перечислены все cookies
- [ ] Указаны сроки жизни cookies
- [ ] Описаны cookies третьих сторон

## Результат

✅ Все пункты выполнены: сайт соответствует требованиям
⚠️ Есть пропуски: требуется доработка', NOW(), NOW(), NOW())
ON CONFLICT (id) DO NOTHING;

INSERT INTO guide_articles (id, topic_id, slug, status, title, summary, body_base_md, created_at, updated_at, published_at) VALUES 
(24, 25, 'chek-list-soglasie-formy', 'published', 'Чек-лист: Согласие в формах сайта', 'Практический чек-лист для проверки форм сбора персональных данных', 
'# Чек-лист: Согласие в формах сайта

## Проверьте каждую форму на сайте

### Общие требования к формам

- [ ] Есть чекбокс согласия на обработку ПД
- [ ] Чекбокс НЕ отмечен по умолчанию
- [ ] Без согласия форма не отправляется
- [ ] Есть ссылка на политику конфиденциальности

### Текст согласия

- [ ] Указана цель обработки
- [ ] Текст понятен обычному пользователю
- [ ] Нет юридического жаргона
- [ ] Ссылка на политику кликабельна

### Формы регистрации

- [ ] Согласие на обработку ПД
- [ ] Отдельное согласие на рассылку (если есть)
- [ ] Пароль не передаётся в открытом виде

### Формы заказа

- [ ] Согласие на обработку ПД
- [ ] Информация о передаче данных доставке/оплате
- [ ] Согласие на обработку при оформлении без регистрации

### Формы обратной связи

- [ ] Согласие на обработку ПД
- [ ] Минимум запрашиваемых данных
- [ ] Только необходимые поля обязательны

### Формы подписки

- [ ] Согласие на получение рассылки
- [ ] Указан тип рассылки
- [ ] Информация о частоте (рекомендуется)

### Хранение согласий

- [ ] Согласия логируются на сервере
- [ ] Сохраняется дата и время
- [ ] Сохраняется IP-адрес
- [ ] Сохраняется текст согласия

## Результат

✅ Все пункты выполнены: формы соответствуют ФЗ-152
⚠️ Есть пропуски: требуется доработка', NOW(), NOW(), NOW())
ON CONFLICT (id) DO NOTHING;

INSERT INTO guide_articles (id, topic_id, slug, status, title, summary, body_base_md, created_at, updated_at, published_at) VALUES 
(25, 25, 'chek-list-politika-audit', 'published', 'Чек-лист: Аудит политики конфиденциальности', 'Практический чек-лист для проверки политики конфиденциальности', 
'# Чек-лист: Аудит политики конфиденциальности

## Проверьте политику по каждому пункту

### Реквизиты оператора

- [ ] Полное наименование организации
- [ ] ИНН
- [ ] ОГРН
- [ ] Юридический адрес
- [ ] Контактный email
- [ ] Контактный телефон
- [ ] ФИО ответственного за обработку ПД

### Цели обработки

- [ ] Цели указаны конкретно
- [ ] Каждая цель обоснована
- [ ] Нет расплывчатых формулировок
- [ ] Цели соответствуют реальной практике

### Правовые основания

- [ ] Указаны основания для каждой цели
- [ ] Ссылки на статьи ФЗ-152 актуальны
- [ ] Согласие запрашивается где требуется

### Категории данных

- [ ] Перечислены все типы собираемых данных
- [ ] Указаны источники получения данных
- [ ] Технические данные описаны (IP, cookies)

### Сроки хранения

- [ ] Указаны конкретные сроки
- [ ] Сроки обоснованы
- [ ] Описаны действия по истечении срока

### Права субъекта

- [ ] Перечислены все права по ФЗ-152
- [ ] Указан способ реализации каждого права
- [ ] Есть контакты для обращений

### Передача третьим лицам

- [ ] Указаны категории получателей
- [ ] Обоснование передачи
- [ ] Информация о трансграничной передаче

### Актуальность

- [ ] Указана дата последнего обновления
- [ ] Ссылки на законы актуальны
- [ ] Информация соответствует действительности

## Результат

✅ Все пункты выполнены: политика соответствует ФЗ-152
⚠️ Есть пропуски: требуется доработка политики', NOW(), NOW(), NOW())
ON CONFLICT (id) DO NOTHING;

-- Topic 26: Шаблоны документов (4 статьи)
INSERT INTO guide_articles (id, topic_id, slug, status, title, summary, body_base_md, created_at, updated_at, published_at) VALUES 
(26, 26, 'shablon-politiki-internet-magazin', 'published', 'Шаблон политики конфиденциальности для интернет-магазина', 'Готовый шаблон политики для e-commerce сайтов', 
'# Шаблон политики конфиденциальности для интернет-магазина

## Инструкция по использованию

1. Замените [НАЗВАНИЕ КОМПАНИИ] на ваше наименование
2. Заполните реквизиты организации
3. Адаптируйте под ваши цели обработки
4. Добавьте используемые сервисы

---

## ПОЛИТИКА КОНФИДЕНЦИАЛЬНОСТИ

### 1. Общие положения

Настоящая Политика конфиденциальности (далее — Политика) определяет порядок обработки персональных данных [НАЗВАНИЕ КОМПАНИИ], ИНН [ИНН], ОГРН [ОГРН], адрес: [АДРЕС] (далее — Оператор).

Ответственный за обработку персональных данных: [ФИО], email: [EMAIL], тел.: [ТЕЛЕФОН].

### 2. Категории обрабатываемых данных

Оператор обрабатывает следующие персональные данные:
- Идентификационные данные: ФИО, дата рождения
- Контактные данные: телефон, email, адрес доставки
- Данные о заказах: история покупок, предпочтения
- Технические данные: IP-адрес, cookies, данные о браузере

### 3. Цели обработки

- Оформление и доставка заказов
- Информирование о статусе заказа
- Обработка платежей
- Рассылка новостей и акций (с согласия)
- Улучшение качества обслуживания
- Выполнение требований законодательства

### 4. Правовые основания

- Согласие субъекта (ст. 9 ФЗ-152)
- Исполнение договора купли-продажи (п. 5 ч. 1 ст. 6 ФЗ-152)
- Требования налогового законодательства (п. 2 ч. 1 ст. 6 ФЗ-152)

### 5. Сроки хранения

- Данные заказов: 5 лет (требования налогового учёта)
- Данные регистрации: до удаления аккаунта + 30 дней
- Данные рассылки: до отписки

### 6. Передача третьим лицам

Данные могут передаваться:
- Службам доставки: [перечислить]
- Платёжным системам: [перечислить]
- Аналитическим сервисам: Яндекс.Метрика

### 7. Права субъекта

Вы имеете право на доступ, уточнение, блокирование, уничтожение ваших данных. Для реализации прав обратитесь: [EMAIL].

### 8. Cookies

Сайт использует cookies. Подробнее — в Политике cookies.

Дата обновления: [ДАТА]', NOW(), NOW(), NOW())
ON CONFLICT (id) DO NOTHING;

INSERT INTO guide_articles (id, topic_id, slug, status, title, summary, body_base_md, created_at, updated_at, published_at) VALUES 
(27, 26, 'shablon-soglasiya-na-obrabotku', 'published', 'Шаблон согласия на обработку персональных данных', 'Готовый шаблон текста согласия для форм на сайте', 
'# Шаблон согласия на обработку персональных данных

## Варианты для разных форм

### Форма заказа (короткий вариант)

```
[ ] Нажимая кнопку «Оформить заказ», я даю согласие на обработку моих персональных данных в соответствии с [Политикой конфиденциальности] для целей оформления и доставки заказа.
```

### Форма заказа (полный вариант)

```
[ ] Я даю согласие ООО «[НАЗВАНИЕ]» (ИНН [ИНН]) на обработку моих персональных данных (ФИО, телефон, email, адрес доставки) для целей оформления, оплаты и доставки заказа. Согласие действует до его отзыва. С [Политикой конфиденциальности] ознакомлен(а).
```

### Форма обратной связи

```
[ ] Нажимая «Отправить», я даю согласие на обработку моих персональных данных для целей обработки обращения в соответствии с [Политикой конфиденциальности].
```

### Форма регистрации

```
[ ] Регистрируясь на сайте, я даю согласие на обработку моих персональных данных в соответствии с [Политикой конфиденциальности]. Я понимаю, что могу отозвать согласие и удалить аккаунт в любой момент.
```

### Форма подписки на рассылку

```
[ ] Я даю согласие на получение рекламных материалов и новостей на указанный email. Я могу отписаться в любой момент по ссылке в письме.
```

## Важные правила

✅ Чекбокс НЕ отмечен по умолчанию
✅ Ссылка на политику открывается в новом окне
✅ Текст читаем (не мелкий шрифт)
✅ Форма не отправляется без согласия
✅ Согласие логируется на сервере', NOW(), NOW(), NOW())
ON CONFLICT (id) DO NOTHING;

INSERT INTO guide_articles (id, topic_id, slug, status, title, summary, body_base_md, created_at, updated_at, published_at) VALUES 
(28, 26, 'shablon-cookie-politiki', 'published', 'Шаблон политики использования cookies', 'Готовый шаблон отдельной политики cookies', 
'# Шаблон политики использования cookies

## ПОЛИТИКА ИСПОЛЬЗОВАНИЯ ФАЙЛОВ COOKIE

### 1. Что такое cookies

Файлы cookie — это небольшие текстовые файлы, которые сохраняются на вашем устройстве при посещении нашего сайта.

### 2. Какие cookies мы используем

#### Строго необходимые
| Cookie | Назначение | Срок |
|--------|-----------|------|
| session_id | Авторизация | Сессия |
| csrf_token | Безопасность | Сессия |

#### Аналитические
| Cookie | Назначение | Срок |
|--------|-----------|------|
| _ym_uid | Яндекс.Метрика | 1 год |
| _ym_d | Яндекс.Метрика | 1 год |
| _ym_isad | Яндекс.Метрика | 2 дня |

#### Функциональные
| Cookie | Назначение | Срок |
|--------|-----------|------|
| cart | Корзина покупок | 30 дней |
| lang | Язык сайта | 1 год |

### 3. Управление cookies

Вы можете управлять cookies:
- Через настройки cookie-баннера на нашем сайте
- Через настройки вашего браузера

### 4. Отключение cookies

Вы можете отключить cookies в настройках браузера:
- Chrome: Настройки → Конфиденциальность → Файлы cookie
- Firefox: Настройки → Приватность → Cookie
- Safari: Настройки → Конфиденциальность → Cookies

Обратите внимание: отключение cookies может повлиять на работу сайта.

### 5. Cookies третьих сторон

На нашем сайте используются сервисы:
- **Яндекс.Метрика** — аналитика посещаемости
- **[Другие сервисы]**

### 6. Изменения политики

Мы можем обновлять эту политику. Дата последнего обновления указана ниже.

Дата обновления: [ДАТА]', NOW(), NOW(), NOW())
ON CONFLICT (id) DO NOTHING;

INSERT INTO guide_articles (id, topic_id, slug, status, title, summary, body_base_md, created_at, updated_at, published_at) VALUES 
(29, 26, 'shablon-cookie-bannera', 'published', 'Шаблон текста для cookie-баннера', 'Готовые тексты для cookie-баннера на сайте', 
'# Шаблон текста для cookie-баннера

## Минимальный вариант

```html
<div class="cookie-banner">
  <p>Мы используем cookies для улучшения работы сайта. 
  <a href="/cookies">Подробнее</a></p>
  <button>Принять</button>
  <button>Только необходимые</button>
</div>
```

## Стандартный вариант

```html
<div class="cookie-banner">
  <h4>Мы используем файлы cookie</h4>
  <p>Наш сайт использует cookie-файлы для аналитики и персонализации. 
  Продолжая использовать сайт, вы соглашаетесь с использованием cookies.</p>
  <p><a href="/cookies">Политика cookies</a></p>
  <div class="buttons">
    <button class="primary">Принять все</button>
    <button class="secondary">Только необходимые</button>
    <button class="link">Настроить</button>
  </div>
</div>
```

## Расширенный вариант с настройками

```html
<div class="cookie-banner">
  <h4>Настройки конфиденциальности</h4>
  <p>Мы используем cookies для работы сайта, аналитики и персонализации.</p>
  
  <div class="cookie-options">
    <label>
      <input type="checkbox" checked disabled> 
      <strong>Необходимые</strong> — для работы сайта
    </label>
    <label>
      <input type="checkbox" id="analytics"> 
      <strong>Аналитические</strong> — Яндекс.Метрика
    </label>
    <label>
      <input type="checkbox" id="marketing"> 
      <strong>Маркетинговые</strong> — персонализация рекламы
    </label>
  </div>
  
  <p><a href="/cookies">Подробнее о cookies</a></p>
  
  <div class="buttons">
    <button class="primary">Принять выбранные</button>
    <button class="secondary">Принять все</button>
  </div>
</div>
```

## Важные требования

✅ Кнопка отказа доступна и видна
✅ Нет cookie wall (блокировки сайта)
✅ Чекбоксы НЕ отмечены по умолчанию (кроме необходимых)
✅ Ссылка на политику cookies работает
✅ Баннер не появляется повторно после выбора', NOW(), NOW(), NOW())
ON CONFLICT (id) DO NOTHING;

-- Обновляем счётчик sequence для id
SELECT setval(''guide_articles_id_seq'', (SELECT MAX(id) FROM guide_articles));

-- Готово! Проверка:
-- SELECT COUNT(*) as total, COUNT(*) FILTER (WHERE id >= 11) as new_articles FROM guide_articles;
